#foreach( $subnetGroup in $subnetGroups )
	,
	"${subnetGroup.color}SubnetGroupCIDR": {
		"Description": "$subnetGroup.color subnet group CIDR",
		"Value": "${subnetGroup.cidr}",
		"Export": {
			"Name": {
				"Fn::Join": [
					"-",
					[
						{
							"Ref": "AWS::Region"
						},
						{
							"Ref": "AWS::StackName"
						},
						"${subnetGroup.color}-CIDR"
					]
				]
			}
		}
	}
	#foreach ( $subnet in $subnetGroup.subnets )
		,
		"${subnet.name}Id": {
			"Description": "Export subnet's ID",
			"Value": {
				"Ref": "${subnet.name}"
			},
			"Export": {
				"Name": {
					"Fn::Join": [
						"-",
						[
							{
								"Ref": "AWS::Region"
							},
							{
								"Ref": "AWS::StackName"
							},
							"${subnet.name}-ID"
						]
					]
				}
			}
		},
		"${subnet.name}Cidr": {
			"Description": "Export subnet's CIDR",
			"Value": "${subnet.cidr}",
			"Export": {
				"Name": {
					"Fn::Join": [
						"-",
						[
							{
								"Ref": "AWS::Region"
							},
							{
								"Ref": "AWS::StackName"
							},
							"${subnet.name}-CIDR"
						]
					]
				}
			}
		}
	#end	
#end
#foreach( $subnetGroup in $subnetGroups )
,
	"${subnetGroup.color}PublicSubnets": {
		"Description": "Comma separated list of all public sub-nets that belong to the ${subnetGroup.color}",
		"Value" : {
			"Fn::Join": [
				", ",
				[
					#set($i = 0)
					#foreach ($subnet in $subnetGroup.subnets)
					#if($subnet.type == 'Public')
					#if( $i > 0 ) , #end
					{"Ref":"${subnet.name}"}
					#set($i = $i+1)
					#end
					#end
				]
			]
		},
		"Export": {
			"Name": {
				"Fn::Join": [
					"-",
					[
						{
							"Ref": "AWS::Region"
						},
						{
							"Ref": "AWS::StackName"
						},
						"${subnetGroup.color}-Public-Subnets"
					]
				]
			}
		}
	}
#end
#foreach( $subnetGroup in $subnetGroups )
,
	"${subnetGroup.color}PrivateSubnets": {
		"Description": "Comma separated list of all private sub-nets that belong to the ${subnetGroup.color}",
		"Value" : {
			"Fn::Join": [
				", ",
				[
					#set($i = 0)
					#foreach ($subnet in $subnetGroup.subnets)
					#if($subnet.type == 'Private')
					#if( $i > 0 ) , #end
					{"Ref":"${subnet.name}"}
					#set($i = $i+1)
					#end
					#end
				]
			]
		},
		"Export": {
			"Name": {
				"Fn::Join": [
					"-",
					[
						{
							"Ref": "AWS::Region"
						},
						{
							"Ref": "AWS::StackName"
						},
						"${subnetGroup.color}-Private-Subnets"
					]
				]
			}
		}
	}
#end